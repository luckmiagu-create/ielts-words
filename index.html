<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>é›…æ€å•è¯è®°å¿† Â· ç¨³å®šæœ€ç»ˆç‰ˆ</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<style>
:root{
  --bg:#f5f7fa;--card:#fff;--text:#111;
  --sub:#6b7280;--btn:#4f46e5;
  --ok:#16a34a;--bad:#dc2626;
}
.dark{
  --bg:#0f172a;--card:#1e293b;--text:#f8fafc;
  --sub:#94a3b8;--btn:#6366f1;
}
*{box-sizing:border-box}
body{
  margin:0;background:var(--bg);color:var(--text);
  font-family:-apple-system,BlinkMacSystemFont,"PingFang SC","Microsoft YaHei",Arial;
}
.app{max-width:860px;margin:auto;padding:16px}
h1{text-align:center;margin:12px 0}

.card{
  background:var(--card);
  padding:22px;
  border-radius:20px;
  box-shadow:0 12px 30px rgba(0,0,0,.12);
}
.row{
  display:flex;gap:10px;justify-content:center;
  flex-wrap:wrap;margin:10px 0;
}
button{
  min-width:96px;padding:10px 16px;
  border:none;border-radius:14px;
  font-size:15px;cursor:pointer;
  background:var(--btn);color:#fff;
}
.secondary{background:#64748b}

.question{
  font-size:28px;font-weight:700;
  text-align:center;margin-bottom:6px;
}
.hint{
  text-align:center;color:var(--sub);
  font-size:15px;margin-bottom:8px;
}
input{
  width:92%;display:block;margin:10px auto;
  padding:14px;font-size:18px;
  border-radius:14px;
  border:2px solid #e5e7eb;
}
.feedback{
  text-align:center;
  font-size:18px;
  font-weight:bold;
  margin-top:6px;
}
.ok{color:var(--ok)}
.bad{color:var(--bad)}
.answer{
  text-align:center;
  margin-top:6px;
  display:none;
}
.stats{text-align:center;color:var(--sub);font-size:14px;margin-top:12px}
</style>
</head>

<body>
<div class="app">

<h1>é›…æ€å•è¯è®°å¿† Â· ç¨³å®šæœ€ç»ˆç‰ˆ</h1>

<div class="row">
  <button onclick="setMode('en2cn')">è‹±â†’æ±‰</button>
  <button onclick="setMode('cn2en')" class="secondary">æ±‰â†’è‹±</button>
  <button onclick="toggleDark()" class="secondary">ğŸŒ™</button>
</div>

<div class="card">
  <div class="question" id="q"></div>
  <div class="hint" id="hint"></div>
  <input id="input" placeholder="è¾“å…¥ç­”æ¡ˆï¼Œå›è½¦æäº¤">
  <div class="feedback" id="feedback"></div>
  <div class="answer" id="answer"></div>
</div>

<div class="row">
  <button onclick="submit()">âœ” æäº¤</button>
  <button onclick="showAnswer()" class="secondary">ğŸ‘€ ç­”æ¡ˆ</button>
  <button onclick="prev()" class="secondary">â¬… ä¸Šä¸€ä¸ª</button>
  <button onclick="next()" class="secondary">â¡ ä¸‹ä¸€ä¸ª</button>
</div>

<div class="stats" id="stats"></div>

</div>

<script>
let mode="en2cn";
let dark=localStorage.getItem("dark")==="1";

let words=JSON.parse(localStorage.getItem("words"))||[
  {en:"abandon",cn:"æ”¾å¼ƒ",wrong:false},
  {en:"accurate",cn:"å‡†ç¡®çš„",wrong:false},
  {en:"analyze",cn:"åˆ†æ",wrong:false}
];

let index=0;
let answered=false;

function save(){
  localStorage.setItem("words",JSON.stringify(words));
}

function setMode(m){mode=m;render()}
function toggleDark(){
  dark=!dark;
  document.body.classList.toggle("dark",dark);
  localStorage.setItem("dark",dark?"1":"0");
}

function render(){
  const w=words[index];
  q.textContent=(mode==="cn2en"?"æ±‰è¯‘è‹±ï¼š":"è‹±è¯‘æ±‰ï¼š")+(mode==="cn2en"?w.cn:w.en);
  hint.textContent=mode==="cn2en"
    ?w.en.slice(0,2)+" _ ".repeat(w.en.length-2)
    :w.cn[0]+"â–¡".repeat(w.cn.length-1);
  answer.textContent="æ­£ç¡®ç­”æ¡ˆï¼š"+(mode==="cn2en"?w.en:w.cn);
  answer.style.display="none";
  feedback.textContent="";
  input.value="";
  answered=false;
  stats.textContent=`ç¬¬ ${index+1} / ${words.length} ï½œ é”™é¢˜ ${words.filter(w=>w.wrong).length}`;
}

function submit(){
  if(answered) return;
  const v=input.value.trim();
  if(!v) return;
  const w=words[index];
  let ok=false;

  if(mode==="cn2en"){
    ok=v.toLowerCase()===w.en;
  }else{
    ok=w.cn.includes(v);
  }

  answered=true;

  if(ok){
    feedback.textContent="âœ… æ­£ç¡®";
    feedback.className="feedback ok";
    save();
    setTimeout(next,500);
  }else{
    feedback.textContent="âŒ é”™è¯¯";
    feedback.className="feedback bad";
    w.wrong=true;        // â­ è‡ªåŠ¨åŠ å…¥é”™é¢˜æœ¬
    answer.style.display="block";
    save();
  }
}

function showAnswer(){
  answer.style.display="block";
}

function next(){
  if(index<words.length-1){
    index++;
    render();
  }
}

function prev(){
  if(index>0){
    index--;
    render();
  }
}

input.addEventListener("keydown",e=>{
  if(e.key==="Enter"){
    e.preventDefault();
    submit();
  }
});

document.body.classList.toggle("dark",dark);
render();
</script>
</body>
</html>
